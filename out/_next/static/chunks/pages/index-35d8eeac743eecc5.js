(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[332],{227:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>p});var n=s(7876),r=s(4232),i=s(1699),a=s.n(i),c=s(8781),l=s(8254);s(6253);let o=()=>{let{session:e}=(0,l.S)(),[t,s]=(0,r.useState)(10),[i,o]=(0,r.useState)([]),[u,p]=(0,r.useState)(""),[d,h]=(0,r.useState)(""),[_,g]=(0,r.useState)(null),[y,T]=(0,r.useState)(null),[m,w]=(0,r.useState)({accuracy:"",raw:"",wpm:"",cpm:"",time:"",words:"",characters:"",sentence:"",userInput:"",timestamp:""}),[x,f]=(0,r.useState)(!1),j=(0,r.useRef)(null),v=(0,r.useRef)(null),C=(0,r.useRef)(null),k=async t=>{try{let s=await c.A.startTest(t,(null==e?void 0:e.accessToken)||null);g(s.token),p(s.sentence)}catch(e){p("Error while loading test words check your internet connection please")}},N=()=>{f(!1),b()},R=e=>{e.preventDefault(),s(Number(e.target.textContent)),f(!1),b()},b=()=>{w({accuracy:"",raw:"",wpm:"",cpm:"",time:"",words:"",characters:"",sentence:"",userInput:""}),h(""),g(null),T(null),k(t),C.current&&C.current.focus()},E=e=>{0!==d.length||y||T(Date.now()),h(d+e)},S=async()=>{if(!y)return;let s=0,n=0,r=[];u.split("").map((e,t)=>{d[t]===e?s+=1:(n+=1,r.push({position:t,expected:e,typed:d[t]||null}))});let i=(Date.now()-y)/1e3,a=i/60,l=Math.round(s/a),p=s/(n+s),h=Math.round(100*p),g=Math.round(t/a*p),T={accuracy:h,raw:Math.round(t/a),wpm:g,cpm:l,time:Math.round(100*i)/100,words:t,characters:n+s,sentence:u,userInput:d,timestamp:Date.now()};if(o(r),w(T),f(!0),(null==e?void 0:e.accessToken)&&h>70){if(!_)return;try{await c.A.saveResult(T,e.accessToken,_)}catch(e){e.response&&console.log(e.response)}}else(null==e?void 0:e.accessToken)||console.log("User not logged in, results not saved")},I=e=>{if("Tab"===e.key){e.preventDefault(),b(),x?f(!1):""!==m.wpm&&f(!0);return}x||((1===e.key.length&&/^[a-zA-Z]$/.test(e.key)||" "===e.key)&&(E(e.key),e.preventDefault()),"Backspace"===e.key&&(h(d.slice(0,-1)),e.preventDefault()))};return(0,r.useEffect)(()=>{k(t)},[t]),(0,r.useEffect)(()=>{d.length===u.length&&d.length>0&&S()},[d,u]),(0,r.useEffect)(()=>{if(!j.current||!v.current||x)return;let e=j.current.getElementsByTagName("span"),t=d.length;if(e.length>0){let s=(0===t?e[0]:e[Math.min(t,e.length-1)]).getBoundingClientRect(),n=j.current.getBoundingClientRect();v.current.style.left="".concat(s.left-n.left,"px"),v.current.style.top="".concat(s.top-n.top,"px"),v.current.style.height="".concat(s.height,"px")}},[d,u,x]),(0,r.useEffect)(()=>(document.addEventListener("keydown",I),()=>{document.removeEventListener("keydown",I)}),[d,u,x,m]),(0,n.jsxs)("div",{className:a().container,children:[(0,n.jsx)("div",{className:"".concat(x?a().showResults:a().showTyping," ").concat(a().settingsContainer),children:(0,n.jsxs)("div",{className:a().settingsIcons,children:[(0,n.jsx)("p",{children:"Words: "}),(0,n.jsx)("p",{className:a().settingsClickable,onClick:R,children:"10"}),(0,n.jsx)("p",{className:a().settingsClickable,onClick:R,children:"15"}),(0,n.jsx)("p",{className:a().settingsClickable,onClick:R,children:"20"}),(0,n.jsx)("p",{children:"|"}),(0,n.jsx)("p",{className:a().settingsClickable,onClick:N,children:"Clear"})]})}),(0,n.jsxs)("div",{className:"".concat(a().viewContainer," ").concat(x?a().showResults:a().showTyping),children:[(0,n.jsxs)("div",{className:a().typingView,onClick:()=>{C.current&&!x&&C.current.focus()},children:[(0,n.jsxs)("div",{className:a().generatedText,ref:j,children:[u.split("").map((e,t)=>{let s=a().default;return d[t]&&(s=d[t]===e?a().correct:a().wrong),(0,n.jsx)("span",{className:s,children:e},t)}),!x&&(0,n.jsx)("div",{ref:v,className:a().cursor})]},u),(0,n.jsx)("input",{ref:C,type:"text",style:{opacity:0,position:"absolute",width:0,height:0}}),!(null==e?void 0:e.accessToken)&&(0,n.jsxs)("div",{className:a().infoContainer,children:[(0,n.jsx)("i",{className:"material-icons",children:"info_outline"}),(0,n.jsx)("p",{children:"Log in to save your results!"})]})]}),(0,n.jsx)("div",{className:a().resultsView,children:(0,n.jsxs)("div",{className:a().displayResult,children:[(0,n.jsxs)("div",{className:a().topResults,children:[(0,n.jsxs)("div",{children:[(0,n.jsxs)("h3",{children:["WPM: ",m.wpm]}),(0,n.jsxs)("h3",{children:["Acc: ",m.accuracy,"%"]})]}),(0,n.jsx)("div",{children:(0,n.jsx)("div",{children:m.sentence.split("").map((e,t)=>{let s=m.userInput[t],r=s===e;return" "===e&&s&&!r?(0,n.jsx)("span",{className:a().wrongSpace,children:" _ "},t):(0,n.jsx)("span",{className:s?r?a().correct:a().wrong:a().default,children:e},t)})})})]}),(0,n.jsxs)("div",{className:a().bottomResults,children:[(0,n.jsxs)("h3",{children:["Raw: ",m.raw]}),(0,n.jsxs)("h3",{children:["CPM: ",m.cpm]}),(0,n.jsxs)("h3",{children:["Time: ",m.time]}),(0,n.jsxs)("h3",{children:["Words: ",m.words]})]}),(0,n.jsxs)("div",{className:a().returnIcons,children:[(0,n.jsx)("p",{children:"Press Tab to try again"}),(0,n.jsxs)("div",{className:a().returnMobile,onClick:N,children:[(0,n.jsx)("p",{children:"Return"}),(0,n.jsx)("i",{className:"material-icons",children:"subdirectory_arrow_left"})]})]})]})})]})]})};var u=s(6850);function p(){return(0,n.jsx)("div",{className:u.indexWrapper,children:(0,n.jsx)("div",{className:u.typingTestContainer,children:(0,n.jsx)(o,{wordCount:10})})})}},1699:e=>{e.exports={container:"TypingTest_container__YXhli",viewContainer:"TypingTest_viewContainer__6F5_y",settingsContainer:"TypingTest_settingsContainer__OtJzw",settingsIcons:"TypingTest_settingsIcons__j1uy1",settingsClickable:"TypingTest_settingsClickable__x6ypj",typingView:"TypingTest_typingView__zblvr",resultsView:"TypingTest_resultsView__FOmG_",showResults:"TypingTest_showResults___nXx1",showTyping:"TypingTest_showTyping__1KwVy",generatedText:"TypingTest_generatedText__9QjNC",fadeIn:"TypingTest_fadeIn__lT61s",wrong:"TypingTest_wrong__ZAR5o",wrongSpace:"TypingTest_wrongSpace__FBXSo",default:"TypingTest_default__xlnUd",correct:"TypingTest_correct__a2mv8",cursorActive:"TypingTest_cursorActive__PsjLd",cursor:"TypingTest_cursor__wxadN",displayResult:"TypingTest_displayResult__V7hId",topResults:"TypingTest_topResults__o8vof",bottomResults:"TypingTest_bottomResults__t7DCq",returnIcons:"TypingTest_returnIcons__abHgq",returnMobile:"TypingTest_returnMobile__f2lW0",infoContainer:"TypingTest_infoContainer__yS0kz",cursorFade:"TypingTest_cursorFade__UzCSf"}},2649:(e,t,s)=>{"use strict";function n(e){return async(t,s)=>{let n={method:e,headers:{"content-type":"application/json"},...s};null!==n.token&&(n.headers.Authorization="Bearer ".concat(n.token)),null!==n.body&&(n.body=JSON.stringify(n.body)),console.log(t,n);let r=await fetch(t,n);if(!r.ok){let e=Error("Request failed with status "+r.status);throw e.response=r,e}let i=r.headers.get("content-type");return i&&i.includes("application/json")?await r.json():await r.text()}}s.d(t,{C1:()=>l,TB:()=>i,Un:()=>c,hm:()=>r,mI:()=>a});let r=n("GET"),i=n("POST"),a=n("PUT"),c=n("DELETE"),l="https://campustype-backend.onrender.com"},2936:(e,t,s)=>{(window.__NEXT_P=window.__NEXT_P||[]).push(["/",function(){return s(227)}])},6253:(e,t,s)=>{e.exports=s(6656)},6850:e=>{e.exports={typingTestContainer:"styles_typingTestContainer__q4j7E",indexWrapper:"styles_indexWrapper__8inNz"}},8781:(e,t,s)=>{"use strict";s.d(t,{A:()=>r});var n=s(2649);let r={startTest:(e,t)=>(0,n.TB)("".concat(n.C1,"/api/start-test?wordCount=").concat(e),{token:t}),saveResult:(e,t,s)=>(0,n.TB)("".concat(n.C1,"/api/results"),{body:e,token:t,headers:{"Content-Type":"application/json","Test-Token":s}}),getResults:e=>(0,n.hm)("".concat(n.C1,"/api/results/").concat(e)),getRun:e=>(0,n.hm)("".concat(n.C1,"/api/run/").concat(e)),getAllResults:e=>(0,n.hm)("".concat(n.C1,"/api/results"))}}},e=>{var t=t=>e(e.s=t);e.O(0,[636,593,792],()=>t(2936)),_N_E=e.O()}]);