(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[295],{2649:(e,s,t)=>{"use strict";function a(e){return async(s,t)=>{let a={method:e,headers:{"content-type":"application/json"},...t};null!==a.token&&(a.headers.Authorization="Bearer ".concat(a.token)),null!==a.body&&(a.body=JSON.stringify(a.body)),console.log(s,a);let r=await fetch(s,a);if(!r.ok){let e=Error("Request failed with status "+r.status);throw e.response=r,e}let i=r.headers.get("content-type");return i&&i.includes("application/json")?await r.json():await r.text()}}t.d(s,{C1:()=>l,TB:()=>i,Un:()=>o,hm:()=>r,mI:()=>n});let r=a("GET"),i=a("POST"),n=a("PUT"),o=a("DELETE"),l="https://campustype-backend.onrender.com"},3603:e=>{e.exports={formContainerStyling:"LoginForm_formContainerStyling__QHdhI",inputField:"LoginForm_inputField__2zn7O",inputFieldError:"LoginForm_inputFieldError__pTmCG",button:"LoginForm_button__E27bP",discard:"LoginForm_discard__vHLLD",bottomButtons:"LoginForm_bottomButtons__FP9M8",error:"LoginForm_error__C93Kj",viewIcon:"LoginForm_viewIcon__G3epa"}},5794:(e,s,t)=>{(window.__NEXT_P=window.__NEXT_P||[]).push(["/login",function(){return t(8599)}])},6253:(e,s,t)=>{e.exports=t(6656)},7169:(e,s,t)=>{"use strict";t.d(s,{A:()=>r});var a=t(2649);let r={login:e=>(0,a.TB)("".concat(a.C1,"/api/auth/login"),{body:e}),register:e=>(0,a.TB)("".concat(a.C1,"/api/auth/register"),{body:e}),update(e,s){let t=e.id;return(0,a.mI)("".concat(a.C1,"/api/users/").concat(t),{body:e,token:s})},getUser:e=>(0,a.hm)("".concat(a.C1,"/api/users/").concat(e)),deleteUser:e=>(0,a.Un)("".concat(a.C1,"/api/users/").concat(e))}},8599:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>h});var a=t(7876),r=t(4232),i=t(4301),n=t(7169),o=t(8254),l=t(6253),d=t(3603),c=t.n(d),m=t(8230),p=t.n(m);let u=e=>{let{post:s}=e,{session:t,login:d,logout:m}=(0,o.S)(),[u,h]=(0,r.useState)(!1),[w,g]=(0,r.useState)({email:"",password:""}),[_,b]=(0,r.useState)({email:"",password:""}),[x,j]=(0,r.useState)(!1),v=e=>{let s=!0,t={email:"",password:""};return e.email?/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(e.email)?e.email.length>255&&(t.email="Email is too long (max 255 characters)",s=!1):(t.email="Please enter a valid email address",s=!1):(t.email="Email can't be empty",s=!1),e.password?e.password.length<5?(t.password="Password must be at least 5 characters",s=!1):e.password.length>255?(t.password="Password is too long (max 255 characters)",s=!1):/(?=.*[a-z])(?=.*[A-Z])(?=.*\d)/.test(e.password)||(t.password="Password must contain uppercase, lowercase, and a number",s=!1):(t.password="Password can't be empty",s=!1),g(t),s},y=async e=>{if(e.preventDefault(),v(_)){h(!0);try{let e=await n.A.login(_);if(!e)return;d(e),i.oR.success("Login successfull!",{transition:i.br}),l.router.push("/")}catch(e){g({email:"Invalid Credentials",password:"Invalid Credentials"}),i.oR.error("Invalid Credentials",{transition:i.br})}h(!1)}},f=e=>{b({..._,[e.target.name]:e.target.value}),g({...w,[e.target.name]:""})};return(0,a.jsxs)("div",{className:c().formContainerStyling,children:[(0,a.jsx)("h1",{children:"Login"}),(0,a.jsxs)("form",{onSubmit:y,children:[(0,a.jsxs)("div",{className:w.email?c().inputFieldError:c().inputField,children:[(0,a.jsx)("input",{onChange:f,name:"email",id:"email",value:_.email,placeholder:" "}),(0,a.jsx)("label",{htmlFor:"email",children:"Email"})]}),w.email&&(0,a.jsx)("p",{className:c().error,children:w.email}),(0,a.jsx)("div",{className:w.password?c().inputFieldError:c().inputField,children:(0,a.jsxs)("div",{style:{position:"relative"},children:[(0,a.jsx)("input",{onChange:f,type:x?"text":"password",name:"password",id:"password",value:_.password,placeholder:" "}),(0,a.jsx)("label",{htmlFor:"password",children:"Password"}),(0,a.jsx)("span",{onClick:()=>{j(!x)},className:c().viewIcon,children:x?(0,a.jsx)("i",{className:"material-icons",children:"visibility"}):(0,a.jsx)("i",{className:"material-icons",children:"visibility_off"})})]})}),w.password&&(0,a.jsx)("p",{className:c().error,children:w.password}),(0,a.jsxs)("div",{className:c().bottomButtons,children:[(0,a.jsx)("button",{type:"submit",className:c().button,disabled:u,children:u?"Loading...":"Login"}),(0,a.jsx)(p(),{href:"/register",children:(0,a.jsx)("p",{children:"Not Registered Yet?"})})]})]})]})};function h(e){let{posts:s}=e;return(0,a.jsx)(a.Fragment,{children:(0,a.jsx)(u,{})})}}},e=>{var s=s=>e(e.s=s);e.O(0,[636,593,792],()=>s(5794)),_N_E=e.O()}]);