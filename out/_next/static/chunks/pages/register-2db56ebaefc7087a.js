(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[787],{2649:(e,s,r)=>{"use strict";function a(e){return async(s,r)=>{let a={method:e,headers:{"content-type":"application/json"},...r};null!==a.token&&(a.headers.Authorization="Bearer ".concat(a.token)),null!==a.body&&(a.body=JSON.stringify(a.body)),console.log(s,a);let n=await fetch(s,a);if(!n.ok){let e=Error("Request failed with status "+n.status);throw e.response=n,e}let t=n.headers.get("content-type");return t&&t.includes("application/json")?await n.json():await n.text()}}r.d(s,{C1:()=>l,TB:()=>t,Un:()=>i,hm:()=>n,mI:()=>o});let n=a("GET"),t=a("POST"),o=a("PUT"),i=a("DELETE"),l="https://campustype-backend.onrender.com"},3603:e=>{e.exports={formContainerStyling:"LoginForm_formContainerStyling__QHdhI",inputField:"LoginForm_inputField__2zn7O",inputFieldError:"LoginForm_inputFieldError__pTmCG",button:"LoginForm_button__E27bP",discard:"LoginForm_discard__vHLLD",bottomButtons:"LoginForm_bottomButtons__FP9M8",error:"LoginForm_error__C93Kj",viewIcon:"LoginForm_viewIcon__G3epa"}},4379:(e,s,r)=>{"use strict";r.r(s),r.d(s,{default:()=>h});var a=r(7876),n=r(4232),t=r(4301),o=r(7169),i=r(8254),l=r(6253),d=r(3603),m=r.n(d),c=r(8230),p=r.n(c);let u=e=>{let{post:s}=e,{session:r,login:d,logout:c}=(0,i.S)(),[u,h]=(0,n.useState)(!1),[w,g]=(0,n.useState)({username:"",email:"",password:"",passwordConfirm:""}),[x,_]=(0,n.useState)({username:"",email:"",password:"",passwordConfirm:""}),[f,b]=(0,n.useState)(!1),j=e=>{let s=!0,r={username:"",email:"",password:"",passwordConfirm:""};return e.username?e.username.length<3?(r.username="Username must be at least 3 characters",s=!1):e.username.length>20&&(r.username="Username is too long (max 20 characters)",s=!1):(r.username="Username can't be empty",s=!1),e.email?/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(e.email)?e.email.length>255&&(r.email="Email is too long (max 255 characters)",s=!1):(r.email="Please enter a valid email address",s=!1):(r.email="Email can't be empty",s=!1),e.password?e.password.length<5?(r.password="Password must be at least 5 characters",s=!1):e.password.length>255?(r.password="Password is too long (max 255 characters)",s=!1):/(?=.*[a-z])(?=.*[A-Z])(?=.*\d)/.test(e.password)||(r.password="Password must contain uppercase, lowercase, and a number",s=!1):(r.password="Password can't be empty",s=!1),e.password!==e.passwordConfirm&&(r.passwordConfirm="Passwords must match",s=!1),g(r),s},C=async e=>{if(e.preventDefault(),j(x)){h(!0);try{await o.A.register({username:x.username,email:x.email,password:x.password});let e=await o.A.login({email:x.email,password:x.password});d(e),t.oR.success("Register successful!",{transition:t.br}),l.router.push("/")}catch(s){let e="An error occurred";if(s.response){let r=s.response.status;e=400===r?"Bad request - check your input":401===r?"Login failed - account may not be active":409===r?"User already exists":"Server error: ".concat(r)}else e=s.message;g({username:e,email:e,password:e,passwordConfirm:""}),t.oR.error(e,{transition:t.br})}h(!1)}},y=e=>{_({...x,[e.target.name]:e.target.value}),g({...w,[e.target.name]:""})};return(0,a.jsxs)("div",{className:m().formContainerStyling,children:[(0,a.jsx)("h1",{children:"Register"}),(0,a.jsxs)("form",{onSubmit:C,children:[(0,a.jsxs)("div",{className:w.username?m().inputFieldError:m().inputField,children:[(0,a.jsx)("input",{onChange:y,name:"username",id:"username",value:x.username,placeholder:" "}),(0,a.jsx)("label",{htmlFor:"username",children:"Username"})]}),w.username&&(0,a.jsx)("p",{className:m().error,children:w.username}),(0,a.jsxs)("div",{className:w.email?m().inputFieldError:m().inputField,children:[(0,a.jsx)("input",{onChange:y,name:"email",id:"email",value:x.email,placeholder:" "}),(0,a.jsx)("label",{htmlFor:"email",children:"Email"})]}),w.email&&(0,a.jsx)("p",{className:m().error,children:w.email}),(0,a.jsx)("div",{className:w.password?m().inputFieldError:m().inputField,children:(0,a.jsxs)("div",{style:{position:"relative"},children:[(0,a.jsx)("input",{onChange:y,type:f?"text":"password",name:"password",id:"password",value:x.password,placeholder:" "}),(0,a.jsx)("label",{htmlFor:"password",children:"Password"}),(0,a.jsx)("span",{onClick:()=>{b(!f)},className:m().viewIcon,children:f?(0,a.jsx)("i",{className:"material-icons",children:"visibility"}):(0,a.jsx)("i",{className:"material-icons",children:"visibility_off"})})]})}),w.password&&(0,a.jsx)("p",{className:m().error,children:w.password}),(0,a.jsx)("div",{className:w.passwordConfirm?m().inputFieldError:m().inputField,children:(0,a.jsxs)("div",{style:{position:"relative"},children:[(0,a.jsx)("input",{onChange:y,type:"password",name:"passwordConfirm",id:"passwordConfirm",value:x.passwordConfirm,placeholder:" "}),(0,a.jsx)("label",{htmlFor:"passwordConfirm",children:"Confirm Password"})]})}),w.passwordConfirm&&(0,a.jsx)("p",{className:m().error,children:w.passwordConfirm}),(0,a.jsxs)("div",{className:m().bottomButtons,children:[(0,a.jsx)("button",{type:"submit",className:m().button,disabled:u,children:u?"Loading...":"Register"}),(0,a.jsx)(p(),{href:"/login",children:(0,a.jsx)("p",{children:"Already Have An Account?"})})]})]})]})};function h(e){let{posts:s}=e;return(0,a.jsx)(a.Fragment,{children:(0,a.jsx)(u,{})})}},6253:(e,s,r)=>{e.exports=r(6656)},7169:(e,s,r)=>{"use strict";r.d(s,{A:()=>n});var a=r(2649);let n={login:e=>(0,a.TB)("".concat(a.C1,"/api/auth/login"),{body:e}),register:e=>(0,a.TB)("".concat(a.C1,"/api/auth/register"),{body:e}),update(e,s){let r=e.id;return(0,a.mI)("".concat(a.C1,"/api/users/").concat(r),{body:e,token:s})},getUser:e=>(0,a.hm)("".concat(a.C1,"/api/users/").concat(e)),deleteUser:e=>(0,a.Un)("".concat(a.C1,"/api/users/").concat(e))}},9464:(e,s,r)=>{(window.__NEXT_P=window.__NEXT_P||[]).push(["/register",function(){return r(4379)}])}},e=>{var s=s=>e(e.s=s);e.O(0,[636,593,792],()=>s(9464)),_N_E=e.O()}]);